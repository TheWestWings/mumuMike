<!-- pages/login/login.wxml - 登录页面 -->
<view class="container">
  <!-- 头部 -->
  <view class="header">
    <view class="logo">🍹</view>
    <text class="title">木木奶茶</text>
    <text class="subtitle">登录即享更多服务</text>
  </view>

  <!-- 登录表单 -->
  <view class="form-section">
    <!-- 账号登录 -->
    <view class="form-group" wx:if="{{loginType === 'account'}}">
      <view class="input-item">
        <text class="input-icon">👤</text>
        <input 
          class="input" 
          placeholder="请输入用户名"
          value="{{username}}"
          bindinput="onUsernameInput"
        />
      </view>
      <view class="input-item">
        <text class="input-icon">🔒</text>
        <input 
          class="input" 
          type="password"
          placeholder="请输入密码"
          value="{{password}}"
          bindinput="onPasswordInput"
        />
      </view>
      <button class="login-btn" bindtap="accountLogin" loading="{{loading}}">
        登录
      </button>
    </view>

    <!-- 分割线 -->
    <view class="divider">
      <view class="divider-line"></view>
      <text class="divider-text">其他登录方式</text>
      <view class="divider-line"></view>
    </view>

    <!-- 微信一键登录 -->
    <button class="wx-login-btn" bindtap="wxLogin" loading="{{wxLoading}}">
      <text class="wx-icon">📱</text>
      <text>微信一键登录</text>
    </button>

    <!-- 切换到注册 -->
    <view class="switch-section">
      <text class="switch-text">还没有账号？</text>
      <text class="switch-link" bindtap="goToRegister">立即注册</text>
    </view>
  </view>

  <!-- 用户协议 -->
  <view class="agreement">
    <view class="checkbox-wrapper" bindtap="toggleAgreement">
      <view class="checkbox {{agreed ? 'checked' : ''}}">
        <text wx:if="{{agreed}}">✓</text>
      </view>
    </view>
    <text class="agreement-text">
      登录即表示同意
      <text class="link">《用户协议》</text>
      和
      <text class="link">《隐私政策》</text>
    </text>
  </view>
</view>

<!-- 注册弹窗 -->
<view class="register-modal" wx:if="{{showRegister}}">
  <view class="modal-mask" bindtap="closeRegister"></view>
  <view class="modal-content">
    <view class="modal-header">
      <text class="modal-title">注册账号</text>
      <view class="modal-close" bindtap="closeRegister">×</view>
    </view>
    <view class="modal-body">
      <view class="input-item">
        <text class="input-icon">👤</text>
        <input 
          class="input" 
          placeholder="请输入用户名"
          value="{{regUsername}}"
          bindinput="onRegUsernameInput"
        />
      </view>
      <view class="input-item">
        <text class="input-icon">🔒</text>
        <input 
          class="input" 
          type="password"
          placeholder="请输入密码"
          value="{{regPassword}}"
          bindinput="onRegPasswordInput"
        />
      </view>
      <view class="input-item">
        <text class="input-icon">📧</text>
        <input 
          class="input" 
          placeholder="请输入邮箱（选填）"
          value="{{regEmail}}"
          bindinput="onRegEmailInput"
        />
      </view>
      <view class="input-item">
        <text class="input-icon">📱</text>
        <input 
          class="input" 
          placeholder="请输入手机号（选填）"
          value="{{regPhone}}"
          bindinput="onRegPhoneInput"
        />
      </view>
    </view>
    <view class="modal-footer">
      <button class="modal-btn" bindtap="register" loading="{{regLoading}}">
        注册
      </button>
    </view>
  </view>
</view>
