<!-- pages/orderDetail/orderDetail.wxml - è®¢å•è¯¦æƒ…é¡µ -->
<view class="container" wx:if="{{order.id}}">
  <!-- å¤´éƒ¨ -->
  <view class="header">
    <view class="status-icon">
      <text wx:if="{{order.status == 0}}">â³</text>
      <text wx:elif="{{order.status == 1}}">ğŸ‘¨â€ğŸ³</text>
      <text wx:elif="{{order.status == 2}}">âœ…</text>
      <text wx:else>âŒ</text>
    </view>
    <text class="status-text">{{statusText}}</text>
    <text class="status-hint" wx:if="{{order.status == 0}}">è®¢å•å·²æäº¤ï¼Œç­‰å¾…ç¡®è®¤</text>
    <text class="status-hint" wx:elif="{{order.status == 1}}">æ­£åœ¨åˆ¶ä½œä¸­ï¼Œè¯·ç¨å€™...</text>
    <text class="status-hint" wx:elif="{{order.status == 2}}">åˆ¶ä½œå®Œæˆï¼Œè¯·å–é¤</text>
  </view>

  <!-- è®¢å•ä¿¡æ¯ -->
  <view class="section">
    <view class="section-title">è®¢å•ä¿¡æ¯</view>
    <view class="info-item">
      <text class="info-label">è®¢å•å·</text>
      <text class="info-value">{{order.id}}</text>
    </view>
    <view class="info-item" wx:if="{{tableNo}}">
      <text class="info-label">æ¡Œå·</text>
      <text class="info-value">{{tableNo}} å·æ¡Œ</text>
    </view>
    <view class="info-item">
      <text class="info-label">ä¸‹å•æ—¶é—´</text>
      <text class="info-value">{{createTimeText}}</text>
    </view>
    <view class="info-item" wx:if="{{order.updateTime}}">
      <text class="info-label">å®Œæˆæ—¶é—´</text>
      <text class="info-value">{{updateTimeText}}</text>
    </view>
  </view>

  <!-- å•†å“åˆ—è¡¨ -->
  <view class="section">
    <view class="section-title">å•†å“è¯¦æƒ…</view>
    <view class="product-list">
      <view 
        class="product-item"
        wx:for="{{productList}}"
        wx:key="id"
      >
        <image class="product-image" src="{{item.product.pictureUrl}}" mode="aspectFill"></image>
        <view class="product-info">
          <text class="product-name">{{item.product.name}}</text>
          <text class="product-remark" wx:if="{{item.product.comment}}">
            å¤‡æ³¨: {{item.product.comment}}
          </text>
          <view class="product-bottom">
            <text class="product-price">Â¥{{item.product.price}}</text>
            <text class="product-count">x{{item.count}}</text>
          </view>
        </view>
        <!-- å•†å“çŠ¶æ€ -->
        <view class="product-status status-{{item.orderProduct.status}}">
          <text wx:if="{{item.orderProduct.status == 0}}">åˆ¶ä½œä¸­</text>
          <text wx:elif="{{item.orderProduct.status == 1}}">å·²å®Œæˆ</text>
          <text wx:elif="{{item.orderProduct.status == 2}}">å·²é€€å•</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ä»·æ ¼æ±‡æ€» -->
  <view class="section summary">
    <view class="summary-item">
      <text class="summary-label">å•†å“æ€»è®¡</text>
      <text class="summary-value">Â¥{{totalPrice}}</text>
    </view>
    <view class="summary-item total">
      <text class="summary-label">å®ä»˜é‡‘é¢</text>
      <text class="summary-value price">Â¥{{totalPrice}}</text>
    </view>
  </view>

  <!-- åº•éƒ¨æ“ä½œ -->
  <view class="footer" wx:if="{{order.status == 2}}">
    <button class="action-btn primary" bindtap="goToReview">
      å»è¯„ä»·
    </button>
  </view>
</view>

<!-- åŠ è½½å¤±è´¥æˆ–æ— æ•°æ®æç¤º -->
<view class="empty-state" wx:else>
    <view class="loading-text">åŠ è½½ä¸­...</view>
</view>
